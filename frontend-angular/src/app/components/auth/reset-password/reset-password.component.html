<div class="container py-4 col-sm-6">

    <div class="row">
        <img class="mr-3" src="/assets/img/logo-alt.png" alt="Agricore logo" width="70px" height="70px">
        <h1><strong>ARDIT</strong></h1>
    </div>

    <div class="card mt-4">
        <div class="card-body justify-content-center">

            <div class="card-title text-center mb-4">
                <h4><strong>New password</strong></h4>
                <hr>
            </div>

            <div *ngIf="error" class="alert alert-danger">
                <span>{{error}}</span>
            </div>

            <div *ngIf="success" class="alert alert-success">
                <span>{{success}}</span>
            </div>

            <form *ngIf="token" [formGroup]="resetPasswordForm" (ngSubmit)="resetPassword()" novalidate>

                <div class="form-group">
                    <input type="password" class="form-control" formControlName="password" placeholder="New password">

                    <span class="text-danger" *ngIf="fieldInvalid(resetPasswordForm, 'password')">
                        <span class="text-danger" *ngIf="resetPasswordForm.controls['password'].errors.required"><small>Password field is required.</small></span>
                        <span class="text-danger" *ngIf="resetPasswordForm.controls['password'].errors.minlength"><small>Password must be at least 8 characters long.</small></span>
                    </span>
                </div> 

                <div class="form-group">
                    <input type="password" class="form-control" formControlName="password2" placeholder="Confirm password">

                    <span class="text-danger" *ngIf="fieldInvalid(resetPasswordForm, 'password2')">
                        <span class="text-danger" *ngIf="resetPasswordForm.controls['password2'].errors.required"><small>Password confirmation field is required</small><br></span>
                        <span class="text-danger" *ngIf="resetPasswordForm.controls['password2'].errors.minlength"><small>The password must be at least 8 characters long.</small></span>
                        <span class="text-danger" *ngIf="resetPasswordForm.controls['password2'].errors.mustMatch"><small>Passwords must match.</small><br></span>
                    </span>
                </div> 

                <div class="form-group">
                    <button type="submit" class="btn btn-lg btn-primary btn-block" [disabled]="resetPasswordForm.pristine || resetPasswordForm.invalid">Change password 
                        <div *ngIf="spinner" class="spinner-border spinner-border-sm" role="status">
                            <span class="sr-only">Loading...</span>
                          </div>
                    </button>
                </div>

                <div class="text-center">
                    <a routerLink="{{loginRoute}}" [routerLinkActive]="['active']">Sign in</a>
                </div>

            </form>
        
        </div>

    </div>
</div>